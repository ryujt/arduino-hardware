

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>systick.h &mdash; Maple v0.0.12 Documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/breathe.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.0.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/round_logo_32x32.ico"/>
    <link rel="top" title="Maple v0.0.12 Documentation" href="../../index.html" />
    <link rel="up" title="APIs" href="../apis.html" />
    <link rel="next" title="timer.h" href="timer.html" />
    <link rel="prev" title="stm32.h" href="stm32.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="timer.html" title="timer.h"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="stm32.html" title="stm32.h"
             accesskey="P">previous</a> |</li>
    <li><a href="http://leaflabs.com/">LeafLabs</a> |</li>
    
        <li><a href="../../index.html">Index</a> &raquo;</li>

          <li><a href="../../libmaple.html" ><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">libmaple</span></tt></a> &raquo;</li>
          <li><a href="../apis.html" accesskey="U">APIs</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="systick-h">
<span id="libmaple-systick"></span><h1><tt class="docutils literal"><span class="pre">systick.h</span></tt><a class="headerlink" href="#systick-h" title="Permalink to this headline">¶</a></h1>
<p>System timer (SysTick) support.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#types" id="id1">Types</a></li>
<li><a class="reference internal" href="#devices" id="id2">Devices</a></li>
<li><a class="reference internal" href="#functions" id="id3">Functions</a></li>
<li><a class="reference internal" href="#register-map-base-pointers" id="id4">Register Map Base Pointers</a></li>
<li><a class="reference internal" href="#register-bit-definitions" id="id5">Register Bit Definitions</a><ul>
<li><a class="reference internal" href="#control-and-status-register" id="id6">Control and status register</a></li>
<li><a class="reference internal" href="#calibration-value-register" id="id7">Calibration value register</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="types">
<h2><a class="toc-backref" href="#id1">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><em>struct</em> <strong>systick_reg_map</strong></div>
</div>
<blockquote>
<div><p>SysTick register map type. </p>
<p></p>
<em>Public Members</em><blockquote>
<div><dl class="docutils">
<dt id=""><span id="project0structsystick__reg__map_1a9d7fc9f093316c406fd1c807e684fff2"></span>__io uint32 <strong>CSR</strong></dt>
<dd><p class="first">Control and status register. </p>
<p class="last"></p>
</dd>
<dt id=""><span id="project0structsystick__reg__map_1a206a2d996b26c1c24c869a078e6e9925"></span>__io uint32 <strong>RVR</strong></dt>
<dd><p class="first">Reload value register. </p>
<p class="last"></p>
</dd>
<dt id=""><span id="project0structsystick__reg__map_1a9dc848a54e4cef23cc93937c887ac273"></span>__io uint32 <strong>CNT</strong></dt>
<dd><p class="first">Current value register (&#8220;count&#8221;). </p>
<p class="last"></p>
</dd>
<dt id=""><span id="project0structsystick__reg__map_1a231c46d2ab97f8fa9b0dafadb3dfb1f6"></span>__io uint32 <strong>CVR</strong></dt>
<dd><p class="first">Calibration value register. </p>
<p class="last"></p>
</dd>
</dl>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="devices">
<h2><a class="toc-backref" href="#id2">Devices</a><a class="headerlink" href="#devices" title="Permalink to this headline">¶</a></h2>
<p>None.</p>
</div>
<div class="section" id="functions">
<h2><a class="toc-backref" href="#id3">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt id=""><span id="project0systick_8c_1a3824cca1fc00921d15e474451714afa6"></span><div class="line-block">
<div class="line">void <strong>systick_init</strong>(uint32 reload_val)</div>
</div>
</dt>
<dd><p class="first">Initialize and enable SysTick. </p>
<p class="last"><p>Clocks the system timer with the core clock, turns it on, and enables interrupts.</p>
<p><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="breatheparameterlist first last">
<li><tt class="first docutils literal"><span class="pre">reload_val</span></tt> - <p>Appropriate reload counter to tick every 1 ms. </p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</p>
</p>
</dd>
</dl>
<dl class="docutils" id="libmaple-systick-enable">
<dt id=""><span id="project0systick_8c_1ab0296113160a008111a1c39150423b5d"></span><div class="line-block">
<div class="line">void <strong>systick_enable</strong>()</div>
</div>
</dt>
<dd><p class="first">Clock the system timer with the core clock and turn it on; interrupt every 1 ms, for systick_timer_millis. </p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils" id="libmaple-systick-disable">
<dt id=""><span id="project0systick_8c_1a23a475a16abcc21caa11e52539be4a70"></span><div class="line-block">
<div class="line">void <strong>systick_disable</strong>()</div>
</div>
</dt>
<dd><p class="first">Clock the system timer with the core clock, but don&#8217;t turn it on or enable interrupt. </p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a8d9e8be23ed5bcf7ee68333180d1e8ec"></span><div class="line-block">
<div class="line">uint32 <strong>systick_uptime</strong>(void)</div>
</div>
</dt>
<dd><p class="first">Returns the system uptime, in milliseconds. </p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a30ec980344b2f608b40eb67d6ffeed4d"></span><div class="line-block">
<div class="line">uint32 <strong>systick_get_count</strong>(void)</div>
</div>
</dt>
<dd><p class="first">Returns the current value of the SysTick counter. </p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1acfa3c7978f6fd8988d9cdaad5b920cca"></span><div class="line-block">
<div class="line">uint32 <strong>systick_check_underflow</strong>(void)</div>
</div>
</dt>
<dd><p class="first">Check for underflow. </p>
<p class="last">This function returns 1 if the SysTick timer has counted to 0 since the last time it was called. However, any reads of any part of the SysTick Control and Status Register SYSTICK_BASE-&gt;CSR will interfere with this functionality. See the ARM Cortex M3 Technical Reference Manual for more details (e.g. Table 8-3 in revision r1p1). </p>
</dd>
</dl>
</div>
<div class="section" id="register-map-base-pointers">
<h2><a class="toc-backref" href="#id4">Register Map Base Pointers</a><a class="headerlink" href="#register-map-base-pointers" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a5f6ac8b4c581ebfa1f6a2013dec2396d"></span><strong>SYSTICK_BASE</strong></dt>
<dd><p class="first">SysTick register map base pointer. </p>
<p class="last"></p>
</dd>
</dl>
</div>
<div class="section" id="register-bit-definitions">
<h2><a class="toc-backref" href="#id5">Register Bit Definitions</a><a class="headerlink" href="#register-bit-definitions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="control-and-status-register">
<h3><a class="toc-backref" href="#id6">Control and status register</a><a class="headerlink" href="#control-and-status-register" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1ac88ad21c10e9bf72311a31ec16daae8b"></span><strong>SYSTICK_CSR_COUNTFLAG</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a7e71affc5bd57a6756410b15322b8e20"></span><strong>SYSTICK_CSR_CLKSOURCE</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a3be33846b073d0e07c96af91f08c51b0"></span><strong>SYSTICK_CSR_CLKSOURCE_EXTERNAL</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a05e345445a88afea3f3cec81919ab5bf"></span><strong>SYSTICK_CSR_CLKSOURCE_CORE</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a04617219830c078f7e8ed404a674d5fd"></span><strong>SYSTICK_CSR_TICKINT</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a6d273c73a1090f88df37259ebf1d0b99"></span><strong>SYSTICK_CSR_TICKINT_PEND</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a301d731d0e01e05ae414ad37503b7f48"></span><strong>SYSTICK_CSR_TICKINT_NO_PEND</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1ac02cd5ac520780a2f5ddb12e0941f773"></span><strong>SYSTICK_CSR_ENABLE</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a5dde9b251bbbd9fdd3d377cb81620d2e"></span><strong>SYSTICK_CSR_ENABLE_MULTISHOT</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1ad562ec4ee4e7216a7a98ea84b3c2dfe9"></span><strong>SYSTICK_CSR_ENABLE_DISABLED</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
</div>
<div class="section" id="calibration-value-register">
<h3><a class="toc-backref" href="#id7">Calibration value register</a><a class="headerlink" href="#calibration-value-register" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a989fde8dbc0970a78a4ce13bd1d92213"></span><strong>SYSTICK_CVR_NOREF</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a1930ac8ad4c57dbd55a26b7c84b7279f"></span><strong>SYSTICK_CVR_SKEW</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
<dl class="docutils">
<dt id=""><span id="project0systick_8h_1a070ba20fad5994c666fd740bebeabffd"></span><strong>SYSTICK_CVR_TENMS</strong></dt>
<dd><p class="first"></p>
<p class="last"></p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/round_logo_60x60.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../maple-quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maple-ide-install.html">IDE Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide.html">IDE Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unix-toolchain.html">Command-Line Toolchain</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../language.html">Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arduino-compatibility.html">Arduino Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libmaple.html"><tt class="docutils literal"><span class="pre">libmaple</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bootloader.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../arm-gcc.html">GCC and libc for Maple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language-index.html">Language Index</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../adc.html">ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../external-interrupts.html">External Interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fsmc.html">FSMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpio.html">GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c.html">I<sup>2</sup>C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jtag.html">JTAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pwm.html">PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi.html">SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers.html">Timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../systick.html">SysTick</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb.html">USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usart.html">USART</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/maple.html">Maple</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/maple-ret6.html">Maple RET6 Edition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/maple-mini.html">Maple Mini</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/maple-native-beta.html">Maple Native β</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="timer.html" title="timer.h"
             >next</a></li>
        <li class="right" >
          <a href="stm32.html" title="stm32.h"
             >previous</a> |</li>
    <li><a href="http://leaflabs.com/">LeafLabs</a> |</li>
    
        <li><a href="../../index.html">Index</a> &raquo;</li>

          <li><a href="../../libmaple.html" ><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">libmaple</span></tt></a> &raquo;</li>
          <li><a href="../apis.html" >APIs</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, 2011, LeafLabs, LLC.
      Last updated on Sep 13, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>